{
  "name": "delivery",
  "description": "Bidirectional File Transfers For Node.js via Socket.IO",
  "author": {
    "name": "Liam Kaufman",
    "email": "liam.kaufman@gmail.com",
    "url": "http://liamkaufman.com"
  },
  "version": "0.0.3",
  "keywords": [
    "file",
    "transfer",
    "push",
    "socket.io",
    "websockets"
  ],
  "repository": {
    "type": "git",
    "url": "git+https://liamks@github.com/liamks/Delivery.js.git"
  },
  "engines": {
    "node": ">=0.6.0"
  },
  "dependencies": {
    "socket.io": "*",
    "node-uuid": "1.3.3",
    "mime": "*"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "http://www.opensource.org/licenses/MIT"
    }
  ],
  "main": "index",
  "readme": "# Delivery.js (Experimental)\n## Bidirectional File Transfers For Node.js via Socket.IO\n\nSending files to the server, and pushing files to the client should be as easy as possible. Delivery.js uses Node.js and Socket.IO to make it easy to push files to the client, or send them to the server. Files can be pushed to the client as text (utf8) or base64 (for images and binary files). \n\n## Install\n\n    npm install delivery -g\n\n## Browser JavaScript\n\ndelivery.js can be found within lib/client.\n\n## Examples\n\n### Sending a File To a Server (Client is a browser)\n\n#### Server-side code\n```javascript\nvar io  = require('socket.io').listen(5001),\n    dl  = require('delivery'),\n    fs  = require('fs');\n\nio.sockets.on('connection', function(socket){\n  var delivery = dl.listen(socket);\n  delivery.on('receive.success',function(file){\n\n    fs.writeFile(file.name,file.buffer, function(err){\n      if(err){\n        console.log('File could not be saved.');\n      }else{\n        console.log('File saved.');\n      };\n    });\n  });\n});\n```\n#### Client-side code\n```javascript\n$(function(){\n  var socket = io.connect('http://0.0.0.0:5001');\n  \n  socket.on('connect', function(){\n    var delivery = new Delivery(socket);\n\n    delivery.on('delivery.connect',function(delivery){\n      $(\"input[type=submit]\").click(function(evt){\n        var file = $(\"input[type=file]\")[0].files[0];\n        delivery.send(file);\n        evt.preventDefault();\n      });\n    });\n\n    delivery.on('send.success',function(fileUID){\n      console.log(\"file was successfully sent.\");\n    });\n  });\n});\n```\n\n### Pushing a File to a Client (Client is a browser)\n\n### Server-side code\n```javascript\nvar io  = require('socket.io').listen(5001),\n    dl  = require('delivery');\n\nio.sockets.on('connection', function(socket){\n  var delivery = dl.listen(socket);\n  delivery.on('delivery.connect',function(delivery){\n\n    delivery.send({\n      name: 'sample-image.jpg',\n      path : './sample-image.jpg'\n    });\n\n    delivery.on('send.success',function(file){\n      console.log('File successfully sent to client!');\n    });\n\n  });\n});\n```\n\n### Client-side code\n```javascript\n$(function(){\n  var socket = io.connect('http://0.0.0.0:5001');\n  \n  socket.on('connect', function(){\n    var delivery = new Delivery(socket);\n\n    delivery.on('receive.start',function(fileUID){\n      console.log('receiving a file!');\n    });\n\n    delivery.on('receive.success',function(file){\n      if (file.isImage()) {\n        $('img').attr('src', file.dataURL());\n      };\n    });\n  });\n});\n```\n\n### Transfer files between two servers\n\n### Receive file\n```javascript\nio.sockets.on('connection', function(socket){\n  \n  var delivery = dl.listen(socket);\n  delivery.on('receive.success',function(file){\n\t\t\n    fs.writeFile(file.name, file.buffer, function(err){\n      if(err){\n        console.log('File could not be saved: ' + err);\n      }else{\n        console.log('File ' + file.name + \" saved\");\n      };\n    });\n  });\t\n});\n```\n\n### Send file\n```javascript\nsocket.on( 'connect', function() {\n  log( \"Sockets connected\" );\n\t\t\n  delivery = dl.listen( socket );\n  delivery.connect();\n\t\n  delivery.on('delivery.connect',function(delivery){\n    delivery.send({\n      name: 'sample-image.jpg',\n      path : './sample-image.jpg'\n    });\n\n    delivery.on('send.success',function(file){\n      console.log('File sent successfully!');\n    });\n  });\n\t\n});\n```\n\n## API\n\n### Server Functions\n\n#### Importing delivery.js\n\n```javascript\ndl = require('delivery');\n```\n\n#### Listen to the socket\n\n```javascript\nvar delivery = dl.listen(socket);\n```\n\n#### Listening to delivery.js events - delivery.on('event',fn)\n\n```javascript\ndelivery.on('delivery.connect',function(delivery){\n  ...\n});\n```\n#### Sending a file\n\n```javascript\ndelivery.send({\n  name: 'fileName.png',\n  path: 'path/to/file/fileName.png'\n});\n```\n\n```javascript\ndelivery.sendAsText({\n  name: 'fileName.txt',\n  path: 'path/to/file/fileName.txt'\n});\n```\n\n### Server Events\n\n#### 'delivery.connect'\ndelivery.connect is called when a client connects to the server.\n\n```javascript\ndelivery.on('delivery.connect',function(delivery){\n  ...\n});\n```\n\n#### 'receive.start'\nreceive.start is called when the server starts receiving a file. The callback function takes a filePackage object that describes the file being sent.\n\n```javascript\ndelivery.on('receive.start',function(filePackage){\n  console.log(filePackage.name);\n});\n```\n#### 'receive.success'\nreceive.success is called once the file has been successfully reveived by the server. The callback function takes a filePackage.\n\n```javascript\ndelivery.on('receive.success',function(file){\n    fs.writeFile(file.name,file.buffer, function(err){\n      if(err){\n        console.log('File could not be saved.');\n      }else{\n        console.log('File saved.');\n      };\n    });\n  });\n```\n#### 'file.load'\nfile.load is called after .send() is called and immediately after the file is loaded. The callback function takes a filePackage.\n\n```javascript\ndelivery.on('file.load',function(filePackage){\n  console.log(filePackage.name + \" has just been loaded.\");\n});\n```\n#### 'send.start'\nsend.start is called after .send() is called and immediately after the file begins being sent to the client. The callback function takes a filePackage.\n\n```javascript\ndelivery.on('send.start',function(filePackage){\n  console.log(filePackage.name + \" is being sent to the client.\");\n});\n```\n#### 'send.success'\nsend.success is called after .send() is called and once confirmation is received form the client that the the file sent was successfully received. The callback function takes the uid of the file that was sent.\n\n```javascript\ndelivery.on('send.success',function(uid){\n  console.log(\"File successfully sent!\");\n});\n```\n\n### FilePackage\nFilePackage objects encapsulate files and includes a text representation (utf8), or base64 representation of the file. They also include the file's meta data, including `name`, `size` and `mimeType`.\n\n```javascript\nfilePackage.isImage()\n```\n\nreturns true if the file has a corresponding mime type that is an image. It is possible that this method could return false if your file is an image, but does not have a mimetype, or does not have a mimetype of image/gif, image/jpeg, image/png, image/svg+xml, image/tiff. Look for `var imageFilter` within delivery.js if you'd like to add additional mimetypes.\n\n```javascript\nfilePackage.isText()\n```\n\nreturns true if the server used `sendAsText()`.\n\n```javascript\nfilePackage.text()\n```\n\nreturns the text representation of the file sent. If the file has been base64 encoded it returns the base64 encoded version of the file.\n\n```javascript\nfilePackage.dataURL()\n```\n\nreturns the base64 representation of the file prefixed with the data and mimetype necessary to display an image within `<img src=''>`.\n\n### Client\n\n#### Include delivery.js in your html file\n\n```html\n<script src=\"/js/delivery.js\"></script>\n```\n\n#### Events\n\nClient events mirror those on the server, see server events above for more details.\n\n##License\n\nDelivery.js is released under the MIT license:\n\nhttp://www.opensource.org/licenses/MIT\n\n\n## Road Map\n\n1. Incorporating feedback from other developers!\n2. Breaking files into pieces to help transfer larger files.\n3. md5 hash file and confirm the hash when a file has been received.\n4. ?\n\n",
  "_id": "delivery@0.0.3",
  "dist": {
    "shasum": "dcf46ae080df40059790739951b5470eb24e300d",
    "tarball": "http://registry.npmjs.org/delivery/-/delivery-0.0.3.tgz"
  },
  "maintainers": [
    {
      "name": "liamkaufman",
      "email": "liam.kaufman@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "dcf46ae080df40059790739951b5470eb24e300d",
  "_resolved": "https://registry.npmjs.org/delivery/-/delivery-0.0.3.tgz",
  "_from": "delivery@*",
  "bugs": {
    "url": "https://github.com/liamks/Delivery.js/issues"
  },
  "homepage": "https://github.com/liamks/Delivery.js#readme"
}
