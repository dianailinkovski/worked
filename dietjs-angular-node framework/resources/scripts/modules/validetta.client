/*!
 * Validetta - Client-side form validation jQuery plugin
 * Version: 0.9.0 (16 February 2014) | Copyright 2013 Hasan AydoÄŸdu - http://www.hasanaydogdu.com
 */
(function(f){var h={},a={},d=new RegExp(/(minChecked|maxChecked|minSelected|maxSelected|minLength|maxLength|equal|customReg)\[[(\w)-_]{1,15}\]/i),c=new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/),b=new RegExp(/^[\-\+]?\d+\.?\d*$/);var e={empty:"This field is required.",email:"Your E-mail address appears to be invalid.",number:"You can enter only numbers in this field.",maxLength:"Maximum {count} characters allowed!",minLength:"Minimum {count} characters allowed!",checkbox:"This checkbox is required.",maxChecked:"Maximum {count} options allowed. Please be sure to check.",minChecked:"Please select minimum {count} options.",selectbox:"Please select an option.",maxSelected:"Maximum {count} selection allowed.",minSelected:"Minimum {count} selection allowed.",notEqual:"Fields do not match.",creditCard:"Invalid credit card number."};var g={display:"bubble",errorClass:"validetta-bubble",errorClose:true,errorCloseClass:"validetta-bubbleClose",ajax:{call:false,type:"GET",url:null,dataType:"html",beforeSend:f.noop,success:f.noop,fail:f.noop,complete:f.noop},realTime:false,onCompleteFunc:f.noop,customReg:{}};h=function(j,i){this.handler=false;this.options=f.extend(true,{},g,i);this.form=j;return this.events.call(this)};h.prototype.events=function(){var i=this;f(this.form).submit(function(j){a=this.querySelectorAll("[data-validetta]");return i.init.call(i,j)});if(this.options.realTime===true){f(this.form).find("[data-validetta]").not("[type=checkbox]").on("change",function(j){a=f(this);return i.init.call(i,j)});f(this.form).find("[data-validetta][type=checkbox]").on("click",function(j){a=i.form.querySelectorAll('[data-validetta][type=checkbox][name="'+this.name+'"]');return i.init.call(i,j)})}f(this.form).find("[type=reset]").on("click",function(){return i.reset.call(i)});if(this.options.errorClose){f(this.form).on("click","."+this.options.errorCloseClass,function(){var j=this.parentNode;if(j){i.window.close.call(i,j)}return false})}};h.prototype.init=function(r){var q=this;this.reset.call(this,a);for(var p=a.length-1;p>=0;p--){var s,m,o=[],l=[];s=a[p];m="";o=f(s).val();l=s.getAttribute("data-validetta").split(",");for(var n=l.length-1;n>=0;n--){if(l[n]==="required"){var k=s.getAttribute("type");if(k==="checkbox"&&!q.check.checkbox.checked(s)){m+=e.checkbox+"<br />"}else{if(k==="radio"&&q.check.radio.call(q,s)){m+=e.empty+"<br />"}else{if(s.tagName==="SELECT"&&!q.check.selectbox.selected(o)){m+=e.selectbox+"<br />"}}}if((k==="text"||k==="password"||s.tagName==="TEXTAREA")&&!q.check.empty.call(q,o)){m+=e.empty+"<br />"}}if(l[n]==="number"&&!q.check.number(o)){m+=e.number+"<br />"}if(l[n]==="email"&&!q.check.mail(o)){m+=e.email+"<br />"}if(l[n]==="creditCard"&&o!==""&&!q.check.creditCard(o)){m+=e.creditCard+"<br />"}if(d.test(l[n])){var t=l[n].split(/\[|,|\]/);if(t[0]==="maxLength"&&!q.check.maxLength(o,t[1])){m+=e.maxLength.replace("{count}",t[1])+"<br />"}else{if(t[0]==="minLength"&&!q.check.minLength(o,t[1])){m+=e.minLength.replace("{count}",t[1])+"<br />"}else{if(t[0]==="maxChecked"&&!q.check.checkbox.maxChecked.call(q,s,t[1])){s=q.form.querySelectorAll('input[type=checkbox][data-validetta][name="'+s.name+'"]')[0];m+=e.maxChecked.replace("{count}",t[1])+"<br />"}else{if(t[0]==="minChecked"&&!q.check.checkbox.minChecked.call(q,s,t[1])){s=q.form.querySelectorAll('input[type=checkbox][data-validetta][name="'+s.name+'"]')[0];m+=e.minChecked.replace("{count}",t[1])+"<br />"}else{if(t[0]==="maxSelected"&&!q.check.selectbox.maxSelected(o,t[1])){m+=e.maxSelected.replace("{count}",t[1])+"<br />"}else{if(t[0]==="minSelected"&&!q.check.selectbox.minSelected(o,t[1])){m+=e.minSelected.replace("{count}",t[1])+"<br />"}else{if(t[0]==="equal"&&!q.check.equal.call(q,o,t[1])){m+=e.notEqual+"<br />"}else{if(t[0]==="customReg"&&!q.check.customReg(o,q.options.customReg[t[1]].method)){m+=(q.options.customReg[t[1]].errorMessage||e.empty)+"<br />"}}}}}}}}}}if(m!==""){q.window.open.call(q,s,m)}}if(r.type!=="submit"){return}else{if(q.handler===true){return false}else{if(q.options.ajax.call){q.ajax.call(q,arguments);return false}return q.options.onCompleteFunc(q,r)}}};h.prototype.check={empty:function(i){return(this.clear(i)==="")?false:true},mail:function(i){return((c.test(i)===false)&&i!=="")?false:true},number:function(i){return((b.test(i)===false)&&i!=="")?false:true},minLength:function(j,i){var k=j.length;return(k<i&&k!==0)?false:true},maxLength:function(j,i){return(j.length>i)?false:true},equal:function(j,i){return(f(this.form).find('input[name="'+i+'"]').val()!==j)?false:true},creditCard:function(k){var j,r,o,p,l,n,m=0,q;j=new RegExp(/[^0-9]+/g);r=k.replace(j,"");q=r.length;if(q<16){return false}for(l=0;l<q;l++){o=q-l;p=parseInt(r.substring(o-1,o),10);if(l%2===1){n=p*2;if(n>9){n=1+(n-10)}}else{n=p}m+=n}if(m>0&&m%10===0){return true}return false},checkbox:{checked:function(i){return(!i.checked)?false:true},maxChecked:function(k,i){var j=f(this.form.querySelectorAll('input[type=checkbox][name="'+k.name+'"]')).filter(":checked").length;return(j>i)?false:true},minChecked:function(k,i){var j=f(this.form.querySelectorAll('input[type=checkbox][name="'+k.name+'"]')).filter(":checked").length;return(j<i)?false:true}},selectbox:{selected:function(i){return(i===""||i===null)?false:true},maxSelected:function(j,i){return(j!==null&&j!==""&&j.length>i)?false:true},minSelected:function(j,i){return(j!==null&&j!==""&&j.length<i)?false:true}},radio:function(j){var i=f(this.form.querySelectorAll('input[type=radio][name="'+j.name+'"]')).filter(":checked").length;return(i===1)?false:true},customReg:function(k,i){var j=new RegExp(i);return((j.test(k)===false)&&k!=="")?false:true}};h.prototype.window={open:function(q,n){var m=q.parentNode;if(typeof m==="undefined"){m=q[0].parentNode}if(f(m).find("."+this.options.errorClass).length>0){return}var i=document.createElement("span");i.className=this.options.errorClass;if(this.options.display==="bubble"){var o,j,p,l;o=f(q).position();j=f(q).width();p=f(q).height();l=o.top;f(i).empty().css({left:o.left+j+30+"px",top:l+"px"})}m.appendChild(i);i.innerHTML=n;if(this.options.errorClose){var k=document.createElement("span");k.innerHTML="x";k.className=this.options.errorCloseClass;i.appendChild(k)}this.handler=true},close:function(i){i.parentNode.removeChild(i);this.handler=false}};h.prototype.reset=function(k){var l={};if(typeof k==="undefined"||(k.length>1&&k[0].getAttribute("type")!=="checkbox")){l=f(this.form).find("."+this.options.errorClass)}else{l=f(k[0].parentNode).find("."+this.options.errorClass)}for(var j=l.length-1;j>=0;j--){this.window.close.call(this,l[j])}};h.prototype.clear=function(i){return i.replace(/^\s+|\s+$/g,"")};h.prototype.ajax=function(){var l,j,k=this,i;l=f(this.form).serialize();i=this.form.getAttribute("action");j=(this.options.ajax.url)?this.options.ajax.url:i;if(!this.options.ajax.url&&(i===""||i===null)){return console.log("Form action not valid !")}f.ajax({type:k.options.ajax.type,url:j,data:l,dataType:k.options.ajax.dataType,options:k.options,beforeSend:function(){return k.options.ajax.beforeSend()}}).done(function(m){k.options.ajax.success(k,m)}).fail(function(m,n){k.options.ajax.fail(m,n)}).always(function(m){k.options.ajax.complete(m)})};f.fn.validetta=function(i){if(f.validettaLanguage){e=f.extend(true,{},e,f.validettaLanguage.messages)}return this.each(function(){new h(this,i);return this})}})(jQuery);